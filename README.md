# Система аутентификации и авторизации

Данный проект, направлен на демонстрацию собственной системы аутентификации и авторизации пользователей.  
Цель проекта — показать, как можно реализовать login, logout, роли и права доступа без использования встроенных возможностей Django для аутентификации.

## Что умеет система

**Регистрация пользователей** с email, паролем, именем и фамилией  
**Логин и логаут**  
**Просмотр, редактирование и удаление профиля** (мягкое удаление — пользователь не может войти, но запись остаётся в базе с `is_active=False`)  
**Система ролей и прав** для контроля доступа к ресурсам  
**Моковые бизнес-объекты**: посты и комментарии  
**Админ-инструменты** для управления ролями и правами

## Роли и права

В системе есть три роли:

**admin** — полный доступ ко всем ресурсам и админским инструментам  
**user** — может только читать посты и комментарии  
**editor** — может читать и создавать посты, читать комментарии  

Cхема прав: 
```
Роль "admin":
posts: read, write
comments: read, write
доступ к админ-инструментам
```
```
Роль "user":
posts: read
comments: read
нет доступа к админ-инструментам
```
```
Роль "editor":
posts: read, write
comments: read
нет доступа к админ-инструментам
```
## Структура API

### Пользователи (`/api/users/`)

`POST /register/` — регистрация нового пользователя  
`POST /login/` — вход  
`POST /logout/` — выход  
`GET /profile/` — просмотр профиля  
`PUT /profile/` — редактирование профиля  
`DELETE /profile/` — мягкое удаление аккаунта  

### Моковые объекты (`/api/`)

`GET /posts/` — получить список постов  
`POST /posts/` — создать пост (только для ролей с правом write)  
`GET /comments/` — получить комментарии  
`POST /comments/` — создать комментарий (только для ролей с правом write) 

### Админ-инструменты (`/api/admin_tools/`)

`GET /overview/` — список пользователей с их ролями и правами (только для admin)  
`POST /user_roles/` — назначить роль пользователю  
`DELETE /user_roles/` — удалить роль у пользователя  
`POST /role_permissions/` — добавить право роли  
`DELETE /role_permissions/` — удалить право роли

## Как запустить проект

1. Создайте виртуальное окружение и установите зависимости:

```bash
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
.venv\Scripts\activate     # Windows
pip install -r requirements.txt
```

2. Примените миграции

```bash
python manage.py makemigrations
python manage.py migrate
```

3. Заполните базу тестовыми данными

```bash
python seed_db.py
```

4. Запустите сервер

```bash
python manage.py runserver
```

### Технологии:
- **Python 3.13**
- **Django + DRF**
- **sqlite** как тестовая база
- **bcrypt** для хэширования паролей